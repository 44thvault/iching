<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucky Cat I Ching</title>
  <style>
    body {
      font-family: monospace;
      background: radial-gradient(circle at top, #1a1d26, #0f1115);
      color: #f2f2f2;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px;
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
    }
    .cat {
      white-space: pre;
      font-size: clamp(10px, 3.5vw, 14px);
      line-height: 1.2;
      margin-bottom: 12px;
      text-align: center;
      transition: transform 0.15s ease;
    }
    .cat.paw { transform: translateY(-2px) rotate(-1deg); }
    button, select {
      background: #ffd54a;
      border: none;
      padding: 16px 18px;
      font-size: 16px;
      cursor: pointer;
      margin: 8px 0;
      width: 100%;
      max-width: 320px;
      border-radius: 10px;
      box-shadow: 0 6px 0 #c9a900;
    }
    button:active { transform: translateY(2px); box-shadow: 0 4px 0 #c9a900; }
    .coins, .hexagram, .result { margin-top: 14px; text-align: center; }
    .line { font-size: clamp(16px, 5vw, 20px); letter-spacing: 2px; }
    .coin { display: inline-block; margin: 0 4px; animation: flip 0.6s ease; }
    @keyframes flip {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(180deg); }
      100% { transform: rotateY(360deg); }
    }
  </style>
</head>
<body>

<div class="cat" id="cat">
 /\\_/\\
( o   o )  < lucky cat >
 =  ^  =   flipping coins
 |  ___|
 | |   |
</div>

<select id="mode">
  <option value="business">Business</option>
  <option value="relationship">Relationship</option>
  <option value="yesno">Yes / No</option>
</select>

<button id="throw">Throw Coins</button>

<div class="coins" id="coins"></div>
<div class="hexagram" id="hexagram"></div>
<div class="result" id="result"></div>

<script>
// --- DATA ---
const hexagramIndex = {
  "111111":1,"000000":2,"010001":3,"100010":4,"010111":5,"111010":6,"000010":7,"010000":8,
  "110111":9,"111011":10,"000111":11,"111000":12,"101111":13,"111101":14,"000100":15,"001000":16,
  "100110":17,"011001":18,"110000":19,"000011":20,"101001":21,"100101":22,"100000":23,"000001":24,
  "111001":25,"100111":26,"100001":27,"011110":28,"010010":29,"101101":30,"001110":31,"011100":32,
  "001111":33,"111100":34,"000101":35,"101000":36,"101011":37,"110101":38,"001010":39,"010100":40,
  "110001":41,"100011":42,"111110":43,"011111":44,"000110":45,"011000":46,"010110":47,"011010":48,
  "101110":49,"011101":50,"001001":51,"100100":52,"110100":53,"001011":54,"001101":55,"101100":56,
  "110110":57,"011011":58,"010011":59,"110010":60,"110011":61,"001100":62,"101010":63,"010101":64
};

const hexagramMeanings = {
  1:{name:"The Creative",business:"Lead boldly. Momentum favors initiative.",relationship:"Be direct and confident.",yesno:"Yes."},
  2:{name:"The Receptive",business:"Support and adapt.",relationship:"Nurture and listen.",yesno:"Yes, with patience."},
  3:{name:"Difficulty at the Beginning",business:"Early chaos, future gain.",relationship:"Awkward start.",yesno:"Not yet."},
  4:{name:"Youthful Folly",business:"Seek guidance.",relationship:"Learn from mistakes.",yesno:"No."},
  5:{name:"Waiting",business:"Timing matters.",relationship:"Let it unfold.",yesno:"Maybe."},
  6:{name:"Conflict",business:"Avoid escalation.",relationship:"Tension present.",yesno:"No."},
  7:{name:"The Army",business:"Discipline brings success.",relationship:"Shared purpose.",yesno:"Yes."},
  8:{name:"Holding Together",business:"Choose allies wisely.",relationship:"Commitment strengthens.",yesno:"Yes."}
};

// --- LOGIC ---
function coin() {
  return Math.random() < 0.5 ? 2 : 3;
}

function throwCoins() {
  if (navigator.vibrate) navigator.vibrate(30);

  const cat = document.getElementById('cat');
  cat.classList.add('paw');
  setTimeout(() => cat.classList.remove('paw'), 150);

  const mode = document.getElementById('mode').value;
  let lines = [];
  let coinText = '';

  for (let i = 0; i < 6; i++) {
    const c1 = coin(), c2 = coin(), c3 = coin();
    const sum = c1 + c2 + c3;
    const line = (sum === 7 || sum === 9) ? 1 : 0;
    lines.push(line);
    coinText += `<span class='coin'>${sum}</span>`;
  }

  const key = lines.join('');
  const number = hexagramIndex[key];
  const hex = hexagramMeanings[number] || {name:"Unknown",business:"",relationship:"",yesno:""};

  document.getElementById('coins').innerHTML = coinText;
  document.getElementById('hexagram').innerHTML = lines.slice().reverse()
    .map(l => `<div class='line'>${l ? '━━━━━━━' : '━━━ ━━━'}</div>`).join('');

  document.getElementById('result').innerHTML =
    `<strong>Hexagram #${number} — ${hex.name}</strong><br>${hex[mode]}`;
}

// --- EVENT ---
document.getElementById('throw').addEventListener('click', throwCoins);
</script>

</body>
</html>
